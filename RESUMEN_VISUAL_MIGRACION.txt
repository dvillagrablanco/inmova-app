â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘   âœ… MIGRACIÃ“N AL SERVIDOR INMOVA-DEPLOYMENT PREPARADA       â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ ARCHIVOS CREADOS (12 archivos)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š DOCUMENTACIÃ“N (7 archivos):
  âœ… EMPIEZA_AQUI.md                          ğŸ‘ˆ EMPIEZA AQUÃ
  âœ… README_MIGRACION.md                      ğŸ“š Ãndice completo
  âœ… INICIO_RAPIDO_MIGRACION.md              âš¡ GuÃ­a rÃ¡pida (3 pasos)
  âœ… COMANDOS_MIGRACION_RAPIDA.md            ğŸ“‹ Referencia de comandos
  âœ… GUIA_MIGRACION_SERVIDOR_INMOVA.md       ğŸ“– GuÃ­a detallada
  âœ… SERVIDOR_MIGRACION_SSH.md               ğŸ” Info SSH y seguridad
  âœ… RESUMEN_MIGRACION_COMPLETA.md           ğŸ“ Resumen ejecutivo

ğŸ”§ SCRIPTS (4 archivos):
  âœ… scripts/check-pre-migracion.sh          âœ… Verificar preparaciÃ³n
  âœ… scripts/backup-pre-migracion.sh         ğŸ’¾ Crear backup
  âœ… scripts/migracion-servidor.sh           ğŸš€ Ejecutar migraciÃ³n
  âœ… scripts/verificacion-post-migracion.sh  ğŸ” Verificar instalaciÃ³n

ğŸ” CONFIGURACIÃ“N (1 archivo):
  âœ… .env.servidor.inmova-deployment         ğŸ” Plantilla variables

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” INFORMACIÃ“N DEL SERVIDOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Nombre:      inmova-deployment
  Fingerprint: 55:0e:12:f9:8f:a3:b0:4b:04:7e:fe:de:00:3f:53:78
  Clave:       hhk8JqPEpJ3C
  Fecha:       26 de Diciembre, 2025

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš¡ PRIMEROS PASOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  1ï¸âƒ£  Lee el punto de inicio:
     cat EMPIEZA_AQUI.md

  2ï¸âƒ£  O lee la guÃ­a rÃ¡pida:
     cat INICIO_RAPIDO_MIGRACION.md

  3ï¸âƒ£  O ve el Ã­ndice completo:
     cat README_MIGRACION.md

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ MIGRACIÃ“N EN 4 COMANDOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # 1. Verificar que todo estÃ¡ listo
  ./scripts/check-pre-migracion.sh

  # 2. Crear backup
  ./scripts/backup-pre-migracion.sh

  # 3. Migrar (necesitas la IP del servidor)
  export SERVER_IP="xxx.xxx.xxx.xxx"
  ./scripts/migracion-servidor.sh

  # 4. Verificar
  ./scripts/verificacion-post-migracion.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â±ï¸  TIEMPO ESTIMADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  PreparaciÃ³n:   10-15 minutos
  MigraciÃ³n:     15-30 minutos
  VerificaciÃ³n:   5-10 minutos
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  TOTAL:         30-55 minutos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ LO QUE HACE CADA SCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

check-pre-migracion.sh:
  â€¢ Verifica herramientas instaladas (SSH, rsync, curl, etc.)
  â€¢ Verifica variables de entorno
  â€¢ Verifica clave SSH y permisos
  â€¢ Verifica archivos del proyecto
  â€¢ Verifica .env.production sin placeholders
  â€¢ Verifica conectividad al servidor
  â€¢ Verifica espacio en disco

backup-pre-migracion.sh:
  â€¢ Backup de base de datos (PostgreSQL)
  â€¢ Backup de variables de entorno
  â€¢ Backup de configuraciÃ³n
  â€¢ Backup de scripts
  â€¢ Genera checksums para verificaciÃ³n
  â€¢ Comprime todo en .tar.gz

migracion-servidor.sh (12 PASOS):
  1.  Verificar conectividad SSH
  2.  Instalar sistema (Node.js, PostgreSQL, Nginx, Redis, PM2)
  3.  Crear estructura de directorios
  4.  Transferir archivos (rsync)
  5.  Configurar variables de entorno
  6.  Instalar dependencias (yarn install)
  7.  Configurar PostgreSQL
  8.  Ejecutar migraciones Prisma
  9.  Compilar aplicaciÃ³n (yarn build)
  10. Configurar PM2
  11. Configurar Nginx
  12. Configurar firewall (UFW)

verificacion-post-migracion.sh:
  â€¢ Verifica conectividad SSH
  â€¢ Verifica servicios del sistema
  â€¢ Verifica aplicaciÃ³n PM2
  â€¢ Verifica base de datos y tablas
  â€¢ Verifica archivos de la aplicaciÃ³n
  â€¢ Verifica conectividad HTTP/HTTPS
  â€¢ Verifica logs sin errores
  â€¢ Verifica firewall configurado
  â€¢ Verifica recursos del sistema (CPU, RAM, Disco)
  â€¢ Muestra Ãºltimas lÃ­neas de log

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”‘ VARIABLES DE ENTORNO OBLIGATORIAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Antes de migrar, debes generar estas claves:

  # NEXTAUTH_SECRET
  openssl rand -base64 32

  # ENCRYPTION_KEY
  openssl rand -base64 32

  # MFA_ENCRYPTION_KEY
  openssl rand -base64 32

  # CRON_SECRET
  node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

  # VAPID Keys (Push Notifications)
  npx web-push generate-vapid-keys

Y configurar en .env.production:
  â€¢ DATABASE_URL
  â€¢ NEXTAUTH_URL (con tu IP o dominio)
  â€¢ NEXT_PUBLIC_BASE_URL (con tu IP o dominio)
  â€¢ AWS_BUCKET_NAME
  â€¢ AWS_ACCESS_KEY_ID
  â€¢ AWS_SECRET_ACCESS_KEY
  â€¢ STRIPE_SECRET_KEY (producciÃ³n)
  â€¢ STRIPE_PUBLISHABLE_KEY (producciÃ³n)
  â€¢ NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY (producciÃ³n)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š SERVICIOS QUE SE INSTALARÃN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Servicio       VersiÃ³n    Puerto    PropÃ³sito
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Node.js        20.x       -         Runtime de la aplicaciÃ³n
  Yarn           Latest     -         Gestor de paquetes
  PM2            Latest     -         Gestor de procesos
  PostgreSQL     15         5432      Base de datos
  Nginx          Latest     80, 443   Reverse proxy
  Redis          Latest     6379      Cache (opcional)
  UFW            -          -         Firewall

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ—ºï¸  ESTRUCTURA EN EL SERVIDOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  /var/www/inmova/                  # AplicaciÃ³n
  /var/www/inmova/.env              # Variables de entorno
  /var/www/inmova/backups/          # Backups
  /var/log/inmova/                  # Logs de PM2
  /var/log/nginx/                   # Logs de Nginx
  /etc/nginx/sites-available/inmova # Config de Nginx

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“± DESPUÃ‰S DE LA MIGRACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Comandos Ãºtiles:

  # Conectar al servidor
  ssh inmova-deployment

  # Ver estado de PM2
  pm2 status

  # Ver logs
  pm2 logs inmova-production

  # Reiniciar aplicaciÃ³n
  pm2 restart inmova-production

  # Ver estado de servicios
  systemctl status nginx
  systemctl status postgresql

  # Ver recursos
  htop
  df -h
  free -m

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”„ PRÃ“XIMOS PASOS POST-MIGRACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Configurar dominio DNS (opcional)
   â€¢ Apuntar A record a la IP del servidor

2. Instalar certificado SSL (despuÃ©s de configurar dominio)
   â€¢ sudo certbot --nginx -d tudominio.com

3. Configurar backups automÃ¡ticos
   â€¢ Agregar cron job para backups diarios

4. Configurar monitoreo
   â€¢ PM2 Plus, Netdata, Grafana, o Sentry

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CHECKLIST ANTES DE EMPEZAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  [ ] Tengo la IP del servidor
  [ ] Tengo la clave SSH en ~/.ssh/inmova_deployment_key
  [ ] He leÃ­do EMPIEZA_AQUI.md o INICIO_RAPIDO_MIGRACION.md
  [ ] He creado .env.production desde la plantilla
  [ ] He generado todas las claves de seguridad
  [ ] He configurado todas las variables en .env.production
  [ ] Tengo credenciales de AWS S3
  [ ] Tengo credenciales de Stripe (producciÃ³n)
  [ ] Tengo 30-60 minutos disponibles

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ESTADO: TODO LISTO PARA MIGRAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ğŸ“š DocumentaciÃ³n completa âœ…
  ğŸ”§ Scripts funcionales    âœ…
  ğŸ” ConfiguraciÃ³n lista    âœ…
  ğŸ“ GuÃ­as detalladas       âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ Â¡COMIENZA AHORA!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  cat EMPIEZA_AQUI.md

  O directamente:

  ./scripts/check-pre-migracion.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ SOPORTE Y DOCUMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â€¢ Todos los .md en este directorio
  â€¢ Scripts comentados en scripts/
  â€¢ Plantilla de configuraciÃ³n en .env.servidor.inmova-deployment

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Preparado: 26 de Diciembre, 2025
Estado:    âœ… LISTO PARA MIGRAR
Servidor:  inmova-deployment
