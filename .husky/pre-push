#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Run critical tests
if [ -n "$TEST_BASE_URL" ]; then
  echo "ğŸ§ª Running critical tests..."
  npm run test:critical || {
    echo "âŒ Tests failed. Push aborted."
    exit 1
  }
else
  echo "âš ï¸ TEST_BASE_URL no configurado. Tests omitidos."
fi

# Check coverage
echo "ğŸ“Š Checking test coverage..."
npm run test:coverage 2>/dev/null || echo "âš ï¸ Coverage check skipped"

echo "âœ… Pre-push checks passed!"
