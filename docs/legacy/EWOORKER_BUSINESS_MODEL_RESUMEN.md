# üèóÔ∏è EWOORKER - MODELO DE NEGOCIO INDEPENDIENTE

## üìã RESUMEN EJECUTIVO

eWoorker es un **B2B marketplace para subcontrataci√≥n en construcci√≥n** integrado en INMOVA pero con **identidad propia y modelo de ingresos independiente**.

### Acuerdo de Beneficios
- **50% para el Socio Fundador**
- **50% para la Plataforma**

Divisi√≥n autom√°tica en cada transacci√≥n seg√∫n schema `EwoorkerPago`.

---

## üí∞ MODELO DE INGRESOS

### 1. Suscripciones Mensuales

| Plan | Precio/Mes | Comisi√≥n Extra | Target |
|------|------------|----------------|--------|
| **Obrero** | ‚Ç¨0 (Gratis) | 5% por obra | Aut√≥nomos, peque√±as subcontratas |
| **Capataz** | ‚Ç¨49 | 2% por obra + 2% escrow | PYMEs subcontratistas activas |
| **Constructor** | ‚Ç¨149 | 0% comisi√≥n | Jefes de Grupo, Constructoras |

### 2. Comisiones por Transacci√≥n

#### a) Escrow Payments (Pagos Seguros)
- **Comisi√≥n**: 2-3% del monto de la obra
- **Flujo**: Dinero retenido en custodia hasta entrega conforme
- **Beneficio**: Constructor y subcontratista protegidos

#### b) Contrataci√≥n Urgente
- **Comisi√≥n**: 5-10% extra
- **Beneficio**: Prioridad en listado, notificaciones inmediatas

#### c) Maquinaria On-Demand
- **Comisi√≥n**: 5-10% del alquiler
- **Futuro**: Marketplace de equipamiento

#### d) Servicios Premium
- **Certificaciones digitales**: ‚Ç¨50-100/certificado
- **Verificaci√≥n expr√©s**: ‚Ç¨25/empresa
- **Formaci√≥n PRL**: ‚Ç¨150-300/curso

### 3. Ingresos Proyectados (A√±o 1)

```
MES 1-3 (Early Adopters):
- 50 empresas √ó ‚Ç¨25 avg = ‚Ç¨1,250/mes
- Divisi√≥n: ‚Ç¨625 Socio / ‚Ç¨625 Plataforma

MES 4-6 (Growth):
- 200 empresas √ó ‚Ç¨40 avg = ‚Ç¨8,000/mes
- Divisi√≥n: ‚Ç¨4,000 Socio / ‚Ç¨4,000 Plataforma

MES 7-12 (Scale):
- 500 empresas √ó ‚Ç¨50 avg = ‚Ç¨25,000/mes
- Divisi√≥n: ‚Ç¨12,500 Socio / ‚Ç¨12,500 Plataforma

OBJETIVO A√ëO 1: ‚Ç¨150,000 - ‚Ç¨200,000 ingresos totales
Beneficio Socio: ‚Ç¨75,000 - ‚Ç¨100,000
```

---

## üìä PANEL DE M√âTRICAS DEL SOCIO

### Acceso
- **URL**: `/ewoorker/admin-socio`
- **Rol requerido**: `super_admin`
- **Email**: `socio@ewoorker.com`
- **Password**: `Ewoorker2025!Socio`

### KPIs Principales

#### Financiero
- **Tu Beneficio (50%)**: Dinero del socio en el periodo
- **GMV Total**: Gross Merchandise Value (valor total transaccionado)
- **MRR**: Monthly Recurring Revenue (suscripciones)
- **Desglose de Comisiones**: Por tipo (suscripci√≥n, escrow, urgentes)

#### Usuarios
- **Total Empresas**: Registradas en eWoorker
- **Empresas Activas**: Con actividad reciente
- **Por Plan**: Obrero, Capataz, Constructor
- **Crecimiento Mensual**: Nuevas empresas del mes

#### Operaciones
- **Obras Publicadas**: Proyectos disponibles
- **Ofertas Enviadas**: Propuestas de subcontratistas
- **Contratos Activos**: En ejecuci√≥n
- **Contratos Completados**: Finalizados con √©xito

#### Performance
- **Tasa de Conversi√≥n**: % ofertas ‚Üí contratos
- **Tiempo Medio Adjudicaci√≥n**: D√≠as desde publicaci√≥n a firma
- **Valoraci√≥n Plataforma**: Rating promedio usuarios

### Exportaci√≥n de Reportes
- Formato: PDF/TXT
- Periodos: Mes actual, mes anterior, trimestre, a√±o
- Incluye: Todos los KPIs y desglose financiero

---

## üîê CREDENCIALES DEL SOCIO

```
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üîê ACCESO AL PANEL DEL SOCIO FUNDADOR
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìß Email:    socio@ewoorker.com
üîí Password: Ewoorker2025!Socio

üéØ Rol:      super_admin
üîó Panel:    /ewoorker/admin-socio
üåê URL:      https://inmovaapp.com/ewoorker/admin-socio

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```

### Permisos
- ‚úÖ Ver m√©tricas completas de eWoorker
- ‚úÖ Exportar reportes financieros
- ‚úÖ Acceso a logs de auditor√≠a
- ‚úÖ Dashboard independiente de INMOVA
- ‚ùå NO puede modificar configuraci√≥n t√©cnica

---

## üé® SUBLANDING EWOORKER

### URL
- Principal: `/ewoorker/landing`
- Alias: `/ewoorker-landing`

### Precios Actualizados

#### Plan Obrero
```
Precio: GRATIS
Comisi√≥n: 5% por obra cerrada
Target: Aut√≥nomos y peque√±as subcontratas
```

#### Plan Capataz (M√ÅS POPULAR)
```
Precio: ‚Ç¨49/mes
Comisi√≥n: 2% por obra + 2% escrow
Target: PYMEs subcontratistas activas
```

#### Plan Constructor
```
Precio: ‚Ç¨149/mes
Comisi√≥n: 0% (sin comisiones extra)
Target: Jefes de Grupo y Constructoras grandes
```

### FAQ Actualizada
Nueva pregunta a√±adida:
> **¬øHay comisi√≥n por uso?**
> Depende del plan. Plan Obrero (gratis): 5% comisi√≥n por obra cerrada. Plan Capataz (‚Ç¨49/mes): 2% comisi√≥n. Plan Constructor (‚Ç¨149/mes): 0% comisi√≥n + obras destacadas. La comisi√≥n solo se cobra si cierras obra.
>
> **Modelo de negocio eWoorker:** Suscripciones mensuales + comisiones por √©xito. Los ingresos se reparten 50% para la plataforma y 50% para el socio fundador.

---

## üóÑÔ∏è SCHEMA DE BASE DE DATOS

### Modelo `EwoorkerPago`

```prisma
model EwoorkerPago {
  id                    String   @id @default(cuid())
  contratoId            String?
  contrato              EwoorkerContrato? @relation(...)
  
  // Tipo
  tipo                  EwoorkerTipoComision
  concepto              String
  
  // Importes
  montoBase             Float    // Monto sobre el que se calcula
  porcentajeComision    Float?   // Si aplica
  montoComision         Float    // Comisi√≥n de ewoorker
  montoNeto             Float    // Lo que recibe el subcontratista
  
  // ‚úÖ DIVISI√ìN DE BENEFICIOS (50/50)
  beneficioEwoorker     Float    // 50% para plataforma
  beneficioSocio        Float    // 50% para socio fundador
  
  // Estado
  estado                EwoorkerEstadoPago @default(PENDIENTE)
  fechaPago             DateTime?
  
  // Escrow
  retenidoEscrow        Boolean  @default(false)
  fechaLiberacion       DateTime?
  
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
}
```

### Modelo `EwoorkerMetricaSocio`

```prisma
model EwoorkerMetricaSocio {
  id                    String   @id @default(cuid())
  
  // Periodo
  mes                   Int
  ano                   Int
  
  // Financiero (en c√©ntimos)
  gmvTotal              Int      @default(0)
  comisionesGeneradas   Int      @default(0)
  beneficioSocio        Int      @default(0) // ‚úÖ 50%
  beneficioPlataforma   Int      @default(0) // ‚úÖ 50%
  
  // Suscripciones
  suscripcionesActivas  Int
  mrrSuscripciones      Int
  
  // Usuarios
  totalEmpresas         Int
  empresasActivas       Int
  usuariosObrero        Int
  usuariosCapataz       Int
  usuariosConstructor   Int
  
  // Operaciones
  obrasPublicadas       Int
  ofertasEnviadas       Int
  contratosActivos      Int
  contratosCompletados  Int
  
  // Performance
  tasaConversion        Float
  tiempoMedioAdjudicacion Float
  valoracionMediaPlataforma Float
  
  createdAt             DateTime @default(now())
  
  @@unique([mes, ano])
}
```

---

## üìÇ ARCHIVOS IMPLEMENTADOS

### Frontend
```
app/ewoorker/
‚îú‚îÄ‚îÄ landing/page.tsx              # Sublanding con precios actualizados
‚îú‚îÄ‚îÄ admin-socio/page.tsx          # Panel de m√©tricas del socio (NUEVO)
‚îî‚îÄ‚îÄ layout.tsx                    # Metadata eWoorker

components/landing/sections/      # Actualizado con precios claros
```

### Backend
```
app/api/ewoorker/admin-socio/
‚îú‚îÄ‚îÄ metrics/route.ts              # API de m√©tricas (NUEVO)
‚îî‚îÄ‚îÄ export/route.ts               # API de exportaci√≥n reportes (NUEVO)
```

### Scripts
```
scripts/
‚îú‚îÄ‚îÄ create-ewoorker-partner-user.ts     # Crear usuario socio (NUEVO)
‚îî‚îÄ‚îÄ deploy-ewoorker-business-model.py   # Deployment completo (NUEVO)
```

### Documentaci√≥n
```
EWOORKER_BUSINESS_MODEL_RESUMEN.md      # Este archivo
README_CREDENCIALES_SOCIO.md            # Credenciales detalladas
```

---

## üöÄ DEPLOYMENT

### Comando

```bash
python3 scripts/deploy-ewoorker-business-model.py
```

### Pasos del Script

1. **Git pull** - Actualiza c√≥digo desde main
2. **npm install** - Instala dependencias
3. **prisma generate** - Genera Prisma Client
4. **create-ewoorker-partner-user.ts** - Crea usuario del socio
5. **npm run build** - Compila aplicaci√≥n
6. **pm2 reload** - Reinicia sin downtime
7. **Health checks** - Verifica endpoints

### Health Checks

- ‚úÖ Main Landing: `http://localhost:3000/landing`
- ‚úÖ eWoorker Landing: `http://localhost:3000/ewoorker/landing`
- ‚úÖ Admin Socio Panel: `http://localhost:3000/ewoorker/admin-socio`
- ‚úÖ Metrics API: `http://localhost:3000/api/ewoorker/admin-socio/metrics`

---

## ‚úÖ CHECKLIST DE VERIFICACI√ìN

### Precios en Sublanding
- [ ] Plan Obrero muestra "Gratis + 5% comisi√≥n"
- [ ] Plan Capataz muestra "‚Ç¨49/mes + 2% comisi√≥n"
- [ ] Plan Constructor muestra "‚Ç¨149/mes + 0% comisi√≥n"
- [ ] FAQ explica modelo de negocio 50/50

### Panel del Socio
- [ ] Login con `socio@ewoorker.com` funciona
- [ ] Dashboard muestra KPIs principales
- [ ] Tab Financiero muestra divisi√≥n 50/50
- [ ] Exportar reporte genera TXT descargable
- [ ] Selector de periodo funciona (mes, trimestre, a√±o)

### M√©tricas
- [ ] GMV Total calculado correctamente
- [ ] Beneficio Socio = 50% comisiones
- [ ] MRR Suscripciones calculado
- [ ] Tasa de conversi√≥n calculada

### Seguridad
- [ ] Solo `super_admin` puede acceder a panel del socio
- [ ] Acceso denegado para otros roles
- [ ] Logs de auditor√≠a registran accesos

---

## üìû CONTACTO Y SOPORTE

### Para el Socio
- Email: socio@ewoorker.com
- Panel: https://inmovaapp.com/ewoorker/admin-socio
- Soporte t√©cnico: Via panel INMOVA superadmin

### Para Usuarios eWoorker
- Landing: https://inmovaapp.com/ewoorker/landing
- Registro: https://inmovaapp.com/registro?platform=ewoorker
- Soporte: info@ewoorker.com (configurar)

---

## üéØ ROADMAP FUTURO

### Q1 2026
- [ ] Dashboard de m√©tricas en tiempo real (WebSockets)
- [ ] Gr√°ficos de tendencias (Chart.js/Recharts)
- [ ] Notificaciones autom√°ticas al socio (email mensual)
- [ ] Exportar reportes en PDF con logo eWoorker

### Q2 2026
- [ ] Marketplace de maquinaria on-demand
- [ ] Sistema de certificaciones digitales
- [ ] Formaci√≥n PRL integrada
- [ ] App m√≥vil para fichajes (React Native)

### Q3 2026
- [ ] API p√∫blica para integraciones
- [ ] White-label para grandes constructoras
- [ ] Expansi√≥n a otros pa√≠ses (Portugal, Francia)

---

**√öltima actualizaci√≥n**: 2 de enero de 2026  
**Versi√≥n**: 1.0.0  
**Estado**: ‚úÖ Implementado y deployed en producci√≥n
